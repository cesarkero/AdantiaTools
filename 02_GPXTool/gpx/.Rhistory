l <- c('exifr','dplyr','devtools','stringr','xlsx')
lapply(l,library,character.only = TRUE)
# Select the photo path (use readclipboard() to get the right path in windows).
# Use the p.folder as a working directory (just temporary)
p.folder <- "Z:\\De sastre\\CAC\\github\\R_photo_table\\photos"
# Read just .jpg files with exifr
files <- list.files(p.folder, pattern="*.jpg", full.names=T)
exifdata <- read_exif(files)
# Select fields of interest
p.files <- select(exifdata,c("FileName","CreateDate","GPSPosition"))
# CREATE NEW VARIABLES: newfilename
# Creates a chain from field 'CreateDate'
# The aim is to change "AAAA:MM:DD HH:mm:ss" to "AAAAMMDD_HHmmss_001.jpg"
a <- str_replace(str_replace_all(p.files$CreateDate,":","")," ","_")
# Create a counter to add to photo file --> 001 ...999 type. Length of the number of files.
counter <- c(1:nrow(p.files))
counter <- str_replace_all(str_pad(sapply(counter,toString),3,"left")," ","0")
b <- paste0(a,"_",counter,".jpg")
# add a new collum with the previous newfilename to the table photos_sel
p.files <- mutate(p.files,newfilename = b)
# Rename files with the newfilename (in the photo folder and not into the wd)
file.rename(files,p.files$newfilename)
# CREATE A TABLE WITH THE COLUMNS OF INTEREST
# Add collums from exif data:
p.files <-
p.files %>%
mutate(X_coord = str_sub(p.files$GPSPosition,-17))%>%
mutate(Y_coord = str_sub(p.files$GPSPosition, 16,start = 1))%>%
mutate(Ano = str_sub(p.files$CreateDate,1,4))%>%
mutate(Mes = str_sub(p.files$CreateDate,6,7))%>%
mutate(Dia = str_sub(p.files$CreateDate,9,10))%>%
mutate(Hora = str_sub(p.files$CreateDate,12,13))%>%
mutate(Min = str_sub(p.files$CreateDate,15,16))%>%
mutate(Seg = str_sub(p.files$CreateDate,18,19))
# Export table to csv and save it into the photo folder
file_name <- paste(p.folder,"\\","fotos_vinculada.csv",sep="")
write.csv2(p.files, file = file_name,row.names=FALSE, na="")
getwd()
install.packages(c("exifr","dplyr","devtools","stringr","xlsx","rJava"))
l <- c('exifr','dplyr','devtools','stringr','xlsx','rJava')
lapply(l,library,character.only = TRUE)
p.folder <- "Z:\\De sastre\\CAC\\github\\R_photo_table\\photos"
files <- list.files(p.folder, pattern="*.jpg", full.names=T)
exifdata <- read_exif(files)
p.files <- select(exifdata,c("FileName","CreateDate","GPSPosition"))
a <- str_replace(str_replace_all(p.files$CreateDate,":","")," ","_")
counter <- c(1:nrow(p.files))
counter <- str_replace_all(str_pad(sapply(counter,toString),3,"left")," ","0")
b <- paste0(a,"_",counter,".jpg")
p.files <- mutate(p.files,newfilename = b)
file.rename(files,paste(p.folder,"\\",p.files$newfilename,sep=""))
p.files <-
p.files %>%
mutate(X_coord = str_sub(p.files$GPSPosition,-17))%>%
mutate(Y_coord = str_sub(p.files$GPSPosition, 16,start = 1))%>%
mutate(Ano = str_sub(p.files$CreateDate,1,4))%>%
mutate(Mes = str_sub(p.files$CreateDate,6,7))%>%
mutate(Dia = str_sub(p.files$CreateDate,9,10))%>%
mutate(Hora = str_sub(p.files$CreateDate,12,13))%>%
mutate(Min = str_sub(p.files$CreateDate,15,16))%>%
mutate(Seg = str_sub(p.files$CreateDate,18,19))
file_name <- paste(p.folder,"\\","fotos_vinculada.csv",sep="")
write.csv2(p.files, file = file_name,row.names=FALSE, na="")
install.packages(c("exifr","dplyr","devtools","stringr","xlsx","rJava"))
l <- c('exifr','dplyr','devtools','stringr','xlsx','rJava')
lapply(l,library,character.only = TRUE)
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jre1.8.0_151')
Sys.setenv(JAVA_HOME='C:\\Program Files\\Java\\jre1.8.0_151')
install.packages(c("exifr","dplyr","devtools","stringr","xlsx","rJava"))
install.packages(c("exifr", "dplyr", "devtools", "stringr", "xlsx", "rJava"))
l <- c('exifr','dplyr','devtools','stringr','xlsx','rJava')
lapply(l,library,character.only = TRUE)
install.packages(c("exifr","dplyr","devtools","stringr","xlsx","rJava","rlang"))
install.packages(c("exifr", "dplyr", "devtools", "stringr", "xlsx", "rJava", "rlang"))
l <- c('exifr','dplyr','devtools','stringr','xlsx','rJava','rlang')
lapply(l,library,character.only = TRUE)
gpx.folder <- "Z:\\De sastre\\CAC\\github\\R_gpx_table\\gpx"
dir()
dir(gpx.folder)
temp.wd <- getwd()
setwd(gpx.folder)
g.folder <- "Z:\\De sastre\\CAC\\github\\R_gpx_table\\gpx"
setwd(temp.wd)
g.folder <- "Z:\\De sastre\\CAC\\github\\R_gpx_table\\gpx"
temp.wd <- getwd()
setwd(g.folder)
files <- list.files(g.folder, pattern="*.gpx", full.names=T)
filesreadGPX()
files
files[1]
readGPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
install.packages("gpx")
read_GPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
install.packages("rgdal")
library(rgdal)
g.folder <- "Z:\\De sastre\\CAC\\github\\R_gpx_table\\gpx"
temp.wd <- getwd()
setwd(g.folder)
files <- list.files(g.folder, pattern="*.gpx", full.names=T)
files[1]
read_GPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
readGPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
read_GPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
library(plotKML)
install.packages("plotKML")
read_GPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
library("plotKML", lib.loc="~/R/win-library/3.4")
g.folder <- "Z:\\De sastre\\CAC\\github\\R_gpx_table\\gpx"
temp.wd <- getwd()
setwd(g.folder)
files <- list.files(g.folder, pattern="*.gpx", full.names=T)
files[1]
read_GPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
readGPX(files[1],metadata=T,bounds=T, waypoints=T,tracks = T, routes= T)
readGPX(files[1],metadata=F,bounds=F, waypoints=F,tracks = T, routes= F)
